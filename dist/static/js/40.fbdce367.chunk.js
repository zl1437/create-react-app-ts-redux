(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{205:function(e,t,n){e.exports=n.p+"static/media/logo.e7e3580f.png"},206:function(e,t,n){},358:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var a=n(69),o=n(159),r=n(68),i=n(22),s=n(23),c=n(25),u=n(24),d=n(26),l=n(0),h=n(72),f=n.n(h),p=n(76),m=n(205),b=n.n(m),g=(n(206),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){var e=n.state,t=e.hasError,a=e.phone,o={phone:a};n.setState({discodeBtn:!0}),t||""===a?(r.a.fail("\u8bf7\u8f93\u516511\u4f4d\u6709\u6548\u624b\u673a\u53f7",2),n.setState({discodeBtn:!1})):Object(p.c)(o).then(function(e){e.status?(n.setState({discodeBtn:!1}),r.a.info(e.message,3)):(n.setState({verifyCode:e.data},function(){n.htmlBtn()}),console.log(e.data),r.a.info("\u77ed\u4fe1\u53d1\u9001\u6210\u529f",3))})},n.onErrorClick=function(){n.state.hasError&&r.a.info("\u8bf7\u8f93\u516511\u4f4d\u6709\u6548\u624b\u673a\u53f7",3)},n.changePhone=function(e){/^1\d{10}$/.test(e)?n.setState({hasError:!1}):n.setState({hasError:!0}),n.setState({phone:e})},n.changeCode=function(e){n.setState({getVerifyCode:e})},n.htmlBtn=function(){var e=n.state.timer;e=60;var t=setInterval(function(){n.setState({timer:--e,btnText:e,discodeBtn:!0},function(){0===e&&(clearInterval(t),n.setState({btnText:"\u91cd\u65b0\u53d1\u9001",discodeBtn:!1}))})},1e3)},n.changeMust=function(e,t){return 0!==e.replace(/\s/g,"").length||(r.a.info("".concat(t,"\u4e0d\u80fd\u4e3a\u7a7a"),2),!1)},n.handleBind=function(){r.a.loading("");var e=n.state,t=e.timer,a=e.verifyCode,o=e.getVerifyCode,i=e.phone;if(console.log(t),t>0&&n.changeMust(i,"\u624b\u673a\u53f7")&&n.changeMust(o,"\u9a8c\u8bc1\u7801")){if(a!==o)return r.a.hide(),r.a.info("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801"),!1;var s={phone:i,mcode:a};Object(p.a)(s).then(function(e){n.setState({discodeBtn:!1}),r.a.hide(),0===e.status?(r.a.info("\u7ed1\u5b9a\u6210\u529f"),n.props.history.push("/")):r.a.info(e.message)})}else 0===t&&r.a.fail("\u9a8c\u8bc1\u7801\u5df2\u8fc7\u671f")},n.getUser=function(){var e=n.props.location.search,t=f.a.parse(e.substring(1));r.a.loading(""),Object(p.b)({}).then(function(e){r.a.hide(),e.status?r.a.fail(e.message,2):""!==e.data.cellphone&&"1"!==t.change&&(localStorage.setItem("phone",e.data.cellphone),n.props.history.push("/bind/changePhone"))})},n.state={phone:"",hasError:!1,verifyCode:"",getVerifyCode:"",discodeBtn:!1,timer:60,btnText:"\u83b7\u53d6\u9a8c\u8bc1\u7801"},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.title="\u8d26\u53f7\u7ed1\u5b9a",this.getUser()}},{key:"render",value:function(){var e=this.state,t=e.discodeBtn,n=e.hasError,r=e.btnText;return l.createElement("div",{className:"bind-phone"},l.createElement("div",{className:"logo"},l.createElement("img",{src:b.a,alt:""}),l.createElement("p",null,"\u9ad8\u987f\u4f1a\u5458\u670d\u52a1\u4e2d\u5fc3")),l.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",onChange:this.changePhone,error:n,onErrorClick:this.onErrorClick}),l.createElement("div",{className:"get-code clearfix"},l.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",className:"code left",onChange:this.changeCode}),l.createElement(a.a,{type:"primary",className:"left btn",onClick:this.handleClick,disabled:t},r)),l.createElement(a.a,{type:"primary",className:"bind-btn",onClick:this.handleBind},"\u7ed1\u5b9a"),l.createElement("div",{className:"bind-tips"},"*\u91cd\u8981\u63d0\u793a\uff1a\u8bf7\u7ed1\u5b9a\u60a8\u5728\u62a5\u540d\u65f6\u767b\u8bb0\u7684\u624b\u673a\u53f7\uff0c\u82e5\u7ed1\u5b9a\u53f7\u7801\u4e0e\u62a5\u540d\u53f7\u7801\u4e0d\u4e00\u81f4\uff0c\u4f1a\u5bfc\u81f4\u60a8\u65e0\u6cd5\u5728\u5fae\u4fe1\u4e2d\u6536\u53d6\u6240\u62a5\u8bfe\u7a0b\u7684\u76f8\u5173\u4fe1\u606f\u3002"))}}]),t}(l.Component))},62:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p});var a=n(27),o=n(22),r=n(23),i=n(71),s=n.n(i),c=n(28),u=Object(c.c)(),d=localStorage.getItem("openid")||"{}",l=JSON.parse(d).data||"";s.a.defaults.baseURL="//".concat(u).concat(c.a),s.a.defaults.headers.post["Content-Type"]="application/json",s.a.interceptors.request.use(function(e){return e.headers.openid=l,Promise.resolve(e)},function(e){return Promise.reject(e)}),s.a.interceptors.response.use(function(e){return Promise.resolve(e.data)},function(e){return Promise.reject(e)});var h=new(function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"request",value:function(e){return s.a.request(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2?arguments[2]:void 0)?{}:{openid:l};return this.request({url:e,params:Object(a.a)({},t,n)})}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.openid&&(t.openid=l),this.request(Object(a.a)({method:"post",url:e,data:t},n))}}]),e}()),f=(h.request.bind(h),h.get.bind(h)),p=h.post.bind(h)},76:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return s});var a=n(62),o=function(e){return Object(a.b)("/Common/sendMessage",e,{openid:!0})},r=function(e){return Object(a.b)("/Common/bind",e,{openid:!0})},i=function(e){return Object(a.b)("/User/getInfo",e,{openid:!0})},s=function(e){return Object(a.a)("/Home/setHotSearchHits",e,!1)}}}]);
//# sourceMappingURL=40.fbdce367.chunk.js.map