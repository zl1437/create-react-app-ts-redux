(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{107:function(e,t,n){"use strict";var a=n(69),o=n(22),r=n(23),i=n(25),c=n(24),s=n(26),l=n(0),u=(n(108),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.btnDisabled;return l.createElement("div",{className:"bottom-btn"},l.createElement(a.a,{type:"primary",disabled:n,className:"btn",onClick:this.props.click},t))}}]),t}(l.Component));t.a=u},108:function(e,t,n){},115:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c});var a=n(62),o=function(e){return Object(a.a)("/staff/staffList",e,!1)},r=function(e){return Object(a.b)("/staff/staffOperation",e,{openid:!0})},i=function(e){return Object(a.b)("/Home/getCompanyList",e,{openid:!0})},c=function(e){return Object(a.a)("/staff/staffDel",e,!1)}},148:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var a=n(159),o=n(15),r=n(68),i=n(22),c=n(23),s=n(25),l=n(24),u=n(26),m=n(0),p=n(72),f=n.n(p),d=n(107),h=n(115),b=(n(148),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).changePhone=function(e){var t=/^1\d{10}$/;n.setState({phone:e},function(){t.test(e)?n.setState({hasError:!1}):n.setState({hasError:!0})})},n.changeMust=function(e,t){return 0!==e.replace(/\s/g,"").length||(r.a.info("".concat(t,"\u4e0d\u80fd\u4e3a\u7a7a"),2),!1)},n.onErrorClick=function(){n.state.hasError&&r.a.info("\u8bf7\u8f93\u516511\u4f4d\u6709\u6548\u624b\u673a\u53f7")},n.checkEmail=function(){var e=n.state.mail;return!!/^([a-zA-Z]|[0-9]|\.)(\w|\-|\.)+@[a-zA-Z0-9]/.test(e)||(r.a.fail("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1",2),n.setState({btnDisabled:!1}),!1)},n.submitEdit=function(){n.setState({btnDisabled:!0});var e=n.state,t=e.company,a=e.name,o=e.phone,i=e.work,c=e.mail,s=e.relation,l=e.company_id,u=e.staff_id,m=e.memberType,p=e.hasError;if(n.changeMust(t,"\u516c\u53f8")&&n.changeMust(a,"\u59d3\u540d")&&n.changeMust(o,"\u624b\u673a\u53f7")&&n.checkEmail()&&!p){var f={company_id:l,company:t,cellphone:o,email:c,nickname:a,position:i,relation:"1"===m?"0":s,staff_id:u};Object(h.c)(f).then(function(e){n.setState({btnDisabled:!1}),e.status?r.a.fail(e.message,2):(r.a.info("\u64cd\u4f5c\u6210\u529f"),n.props.history.go(-1))})}else n.setState({btnDisabled:!1})},n.companyInit=function(){Object(h.a)({}).then(function(e){e.status||n.setState({companyList:Object(o.a)(e.data)})})},n.changeCompany=function(e){n.setState({company:e})},n.changeSelectCompany=function(e){var t=n.state.companyList;e.persist(),n.setState({company_id:e.target.value}),t.map(function(t){t.id===Number(e.target.value)&&n.setState({company:t.name})})},n.checkFromSource=function(){var e=n.props.location.search,t=f.a.parse(e.substring(1));n.setState({company:t.company,name:t.name,phone:t.phone,work:t.work,mail:t.mail,courseId:t.courseId,company_id:t.company_id,staff_id:t.staff_id||"",relation:t.relation||"",memberType:t.memberType,showRelation:t.showRelation})},n.state={company:"",name:"",phone:"",work:"",mail:"",hasError:!1,relation:"",companyList:[],company_id:"",courseId:"",staff_id:"",memberType:"0",btnDisabled:!1,showRelation:""},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.title="\u4eba\u5458\u4fe1\u606f",this.checkFromSource(),this.companyInit()}},{key:"render",value:function(){var e=this,t=this.state,n=t.company,o=t.name,r=t.phone,i=t.work,c=t.mail,s=t.companyList,l=t.relation,u=t.company_id,p=t.btnDisabled,f=t.showRelation;return m.createElement("div",{className:"edit"},0!==s.length?m.createElement("div",{className:"input-item clearfix"},m.createElement("span",{className:"relation"},"*\u516c\u53f8"),m.createElement("select",{value:u,onChange:this.changeSelectCompany},m.createElement("option",{value:"",selected:!0,disabled:!0,style:{display:"none"}},"\u8bf7\u9009\u62e9\u516c\u53f8"),s.length>0&&s.map(function(e,t){return m.createElement("option",{key:t,value:e.id},e.name)}))):m.createElement(a.a,{placeholder:"\u8bf7\u9009\u62e9\u516c\u53f8",className:"input-item",value:n,onChange:this.changeCompany},"*\u516c\u53f8"),m.createElement(a.a,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",className:"input-item",value:o,onChange:function(t){e.setState({name:t})}},"*\u59d3\u540d"),m.createElement(a.a,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",className:"input-item",value:r,onChange:this.changePhone,error:this.state.hasError,onErrorClick:this.onErrorClick},"*\u624b\u673a"),"1"===f?m.createElement("div",{className:"input-item clearfix"},m.createElement("span",{className:"relation"},"*\u5173\u7cfb"),m.createElement("select",{onChange:function(t){e.setState({relation:t.target.value})},value:l||"1"},m.createElement("option",{value:""},"\u8bf7\u9009\u62e9\u4e0e\u60a8\u7684\u5173\u7cfb"),m.createElement("option",{value:"1"},"\u540c\u4e8b"),m.createElement("option",{value:"2"},"\u4eb2\u5c5e"),m.createElement("option",{value:"3"},"\u670b\u53cb"))):m.createElement("div",null),m.createElement(a.a,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",className:"input-item",value:c,onChange:function(t){e.setState({mail:t})}},"*\u90ae\u7bb1"),m.createElement(a.a,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u6240\u5728\u804c\u4f4d",className:"input-item",value:i,onChange:function(t){e.setState({work:t})}},"\u804c\u4f4d"),m.createElement(d.a,{btnDisabled:p,click:this.submitEdit,title:"\u786e\u5b9a"}))}}]),t}(m.Component))},62:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return d});var a=n(27),o=n(22),r=n(23),i=n(71),c=n.n(i),s=n(28),l=Object(s.c)(),u=localStorage.getItem("openid")||"{}",m=JSON.parse(u).data||"";c.a.defaults.baseURL="//".concat(l).concat(s.a),c.a.defaults.headers.post["Content-Type"]="application/json",c.a.interceptors.request.use(function(e){return e.headers.openid=m,Promise.resolve(e)},function(e){return Promise.reject(e)}),c.a.interceptors.response.use(function(e){return Promise.resolve(e.data)},function(e){return Promise.reject(e)});var p=new(function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"request",value:function(e){return c.a.request(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2?arguments[2]:void 0)?{}:{openid:m};return this.request({url:e,params:Object(a.a)({},t,n)})}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.openid&&(t.openid=m),this.request(Object(a.a)({method:"post",url:e,data:t},n))}}]),e}()),f=(p.request.bind(p),p.get.bind(p)),d=p.post.bind(p)}}]);
//# sourceMappingURL=37.294bdf7f.chunk.js.map