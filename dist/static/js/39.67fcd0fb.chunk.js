(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{115:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return o});var a=n(62),r=function(e){return Object(a.a)("/staff/staffList",e,!1)},i=function(e){return Object(a.b)("/staff/staffOperation",e,{openid:!0})},c=function(e){return Object(a.b)("/Home/getCompanyList",e,{openid:!0})},o=function(e){return Object(a.a)("/staff/staffDel",e,!1)}},147:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n(62),r=function(e){return Object(a.b)("/OnlineApply/orderSure",e,{openid:!0})},i=function(e){return Object(a.b)("/OnlineApply/onlineSignUp",e,{openid:!0})}},311:function(e,t,n){},374:function(e,t,n){"use strict";n.r(t);var a=n(69),r=n(15),i=n(68),c=n(22),o=n(23),s=n(25),l=n(24),u=n(26),m=n(222),p=n(0),d=n(29),f=n(72),b=n.n(f),h=(n(311),n(91)),y=n(78),v=n(115),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).checkRelation=function(e){switch(e.relation){case 1:return"\u540c\u4e8b";case 2:return"\u4eb2\u5c5e";default:return"\u670b\u53cb"}},n.submitMail=function(){var e=n.state.id;Object(v.d)({staffId:e}).then(function(e){e.status?i.a.fail(e.message):(i.a.info("\u5220\u9664\u6210\u529f"),window.location.reload())})},n.state={modal1:!1,id:null},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.applyData,a=t.index,r=t.showRelation,i=t.memberType;return p.createElement("div",{className:"apply-item-c clearfix",key:a},p.createElement("div",{className:"apply-item-c-l left"},p.createElement("h3",null,n.nickname,p.createElement("span",null,n.position),"1"===r?p.createElement(y.a,{disabled:!0},this.checkRelation(n)):p.createElement("div",null)),p.createElement("p",null,n.company),p.createElement("p",null,n.cellphone?n.cellphone.substr(0,3)+"****"+n.cellphone.substr(7,11):""),p.createElement("p",null,n.real_email?"****@".concat(n.real_email.split("@")[1]):"")),p.createElement("div",{className:"apply-item-c-r right"},p.createElement(d.b,{to:"/editMember?memberType=".concat(this.props.memberType,"&company=").concat(n.company,"&name=").concat(n.nickname,"&phone=").concat(n.cellphone,"&work=").concat(n.position,"&mail=").concat(n.real_email,"&courseId=").concat(this.props.courseId,"&company_id=").concat(n.company_id,"&staff_id=").concat(n.id,"&relation=").concat(n.relation)},"\u7f16\u8f91"),"1"===i?p.createElement("span",{className:"del-per",onClick:function(){return e.setState({modal1:!0,id:n.id})}}," | \u5220\u9664"):p.createElement("div",null)),p.createElement(h.a,{visible:this.state.modal1,transparent:!0,title:"\u5220\u9664\u5458\u5de5",maskClosable:!1,footer:[{text:"\u53d6\u6d88",onPress:function(){e.setState({modal1:!1})}},{text:"\u786e\u5b9a",onPress:function(){return e.submitMail()}}]},"\u662f\u5426\u786e\u8ba4\u5220\u9664\u6b64\u5458\u5de5"))}}]),t}(p.Component),O=n(147);n.d(t,"default",function(){return k});var g=m.a.CheckboxItem,k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(){n.setState({disableBtn:!0});var e=n.props.location.search,t=b.a.parse(e.substring(1)),a=n.state,r=a.memberArr,c=a.courseId;if(0===r.length)i.a.fail("\u8bf7\u9009\u62e9\u4eba\u5458",2),n.setState({disableBtn:!1});else if(t.vip&&"1"===t.vip){var o={member_num:r.length,staff_ids:r.join(","),course_id:c};Object(O.b)(o).then(function(e){n.setState({disableBtn:!1}),e.status?i.a.fail(e.message,2):n.props.history.push("/paySuccess")})}else{n.setState({disableBtn:!1});var s=r.length,l=r.join(",");n.props.history.push("/payFor?courseId=".concat(c,"&staff_ids=").concat(l,"&member_num=").concat(s))}},n.state={memberArr:[],staffList:[],courseId:"",memberType:"0",disableBtn:!1,showRelation:""},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"changeCheckBox",value:function(e,t){var n=Object(r.a)(this.state.memberArr);n.join(",").indexOf(t)>-1?n.map(function(e,a){e===t&&n.splice(a,1)}):n.push(t),this.setState({memberArr:n})}},{key:"getStaff",value:function(){var e=this;i.a.loading("");var t=this.state.showRelation;Object(v.b)({haveRelation:"1"===t?1:0}).then(function(t){i.a.hide(),t.status||e.setState({staffList:t.data||[]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="\u5728\u7ebf\u62a5\u540d";var t=this.props.location.search,n=b.a.parse(t.substring(1));this.setState({courseId:n.courseId,memberType:n.memberType,showRelation:n.showRelation},function(){e.getStaff(),"1"!==n.memberType?document.title="\u5728\u7ebf\u62a5\u540d":document.title="\u4eba\u5458\u7ba1\u7406"})}},{key:"render",value:function(){var e=this,t=this.state,n=t.staffList,r=t.courseId,i=t.memberType,c=t.disableBtn,o=t.showRelation;return p.createElement("div",{className:"apply-online",style:{paddingBottom:"1rem"}},p.createElement("div",{className:"add"},p.createElement(d.b,{to:"/editMember?memberType=".concat(i,"&company=&name=&phone=&work=&mail=&courseId=").concat(r,"&showRelation=").concat(o)},"1"!==i?"+\u65b0\u589e\u4eba\u5458":"+\u65b0\u589e\u5458\u5de5")),p.createElement("div",{className:"apply-online-c"},(n||[]).map(function(t,n){return p.createElement("div",{className:"apply-item",key:n},"1"!==i?p.createElement(g,{key:n,onChange:function(n){return e.changeCheckBox(n,t.id)}},p.createElement(j,{applyData:t,showRelation:o,index:n,courseId:r,memberType:i})):p.createElement(j,{applyData:t,index:n,courseId:r,memberType:i}))})),"1"!==i?p.createElement("div",{className:"apply-sign"},p.createElement(a.a,{type:"primary",disabled:c,className:"apply-sign-btn",onClick:this.handleSubmit},"\u786e\u5b9a")):p.createElement("div",null))}}]),t}(p.Component)},62:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f});var a=n(27),r=n(22),i=n(23),c=n(71),o=n.n(c),s=n(28),l=Object(s.c)(),u=localStorage.getItem("openid")||"{}",m=JSON.parse(u).data||"";o.a.defaults.baseURL="//".concat(l).concat(s.a),o.a.defaults.headers.post["Content-Type"]="application/json",o.a.interceptors.request.use(function(e){return e.headers.openid=m,Promise.resolve(e)},function(e){return Promise.reject(e)}),o.a.interceptors.response.use(function(e){return Promise.resolve(e.data)},function(e){return Promise.reject(e)});var p=new(function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"request",value:function(e){return o.a.request(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2?arguments[2]:void 0)?{}:{openid:m};return this.request({url:e,params:Object(a.a)({},t,n)})}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.openid&&(t.openid=m),this.request(Object(a.a)({method:"post",url:e,data:t},n))}}]),e}()),d=(p.request.bind(p),p.get.bind(p)),f=p.post.bind(p)}}]);
//# sourceMappingURL=39.67fcd0fb.chunk.js.map